<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Webvert</title>
        <h:outputStylesheet library="css" name="style.css"  />
    </h:head>
    <h:body>
        <ui:composition template="./resources/templates/OverviewContentTemplate.xhtml">
            <ui:define name="main_content">
                <!--<h2 class="webvert_form_heading_color_dark">Campaigns</h2>-->
                <b:tabLinks style="margin-bottom: 16px;">
                    <b:navCommandLink value="Currently Running Campaigns" 
                                      active="true"
                                      icon="tag" 
                                      iconAlign="right" 
                                      update="@form"/>
                    <b:navCommandLink value="Ended Campaigns" 
                                      icon="tag" 
                                      iconAlign="right" 
                                      update="@form"/>
                    <b:navCommandLink value="Cancelled Campaigns" 
                                      icon="tag" 
                                      iconAlign="right" 
                                      update="@form"/>
                    <b:messages />
                </b:tabLinks>

                <!--<b:accordion expandedPanels="runningCampaigns">-->
                <c:forEach items="#{campaignModel.currentUserCampaigns}" var="campaign">
                    <b:panel title="#{campaign.name}" 
                             collapsed="true">
                        <b:row style="margin-left: 32px; margin-right: 32px; margin-top: 32px;">
                            <h3 class="webvert_form_heading_color_dark">Contents</h3>       
                        </b:row>    
                        <b:accordion  style="margin-left: 32px; margin-right: 32px; margin-bottom: 32px; margin-top: 16px">
                            <c:forEach items="#{campaignModel.getContentTypesForCampaign(campaign.id)}" 
                                       var="contentType"
                                       id="forEachCampaign">
                                <b:panel title="#{contentType}">
                                    <b:dataTable value="#{campaignModel.getContentForCampaignId(campaign.id, contentType)}" 
                                                 var="content" 
                                                 custom-options="info: false"
                                                 paginated="false"
                                                 searching="false"
                                                 style="margin: 0px !important; width: 100%; border: 0px">
                                        <b:dataTableColumn label="#{contentType eq 'Image' ? 'Image' : 'Text'}"
                                                           orderable="#{contentType eq 'Image' ? 'false' : 'true'}"
                                                           style="width: 25%">
                                            <c:choose>
                                                <c:when test="#{contentType eq 'Image'}">
                                                    <img src="#{content.value}" style="max-width:100px;max-height:100px;"/>
                                                </c:when>
                                                <c:otherwise>
                                                    <h:outputText value="#{content.value}"/>
                                                </c:otherwise>
                                            </c:choose>                                            
                                        </b:dataTableColumn>
                                        <b:dataTableColumn orderable="true" 
                                                           label="Description"
                                                           style="width: 25%">
                                            <h:outputText value="#{content.description}"/>
                                        </b:dataTableColumn>
                                        <b:dataTableColumn orderable="true" 
                                                           label="Price per request"
                                                           style="width: 25%">
                                            <h:outputText value="#{content.pricePerRequest}"/>
                                        </b:dataTableColumn>
                                        <b:dataTableColumn orderable="true" 
                                                           label="Number of requests ordered"
                                                           style="width: 25%">
                                            <h:outputText value="#{content.numberOfRequests}"/>
                                        </b:dataTableColumn>
                                    </b:dataTable>
                                </b:panel>
                            </c:forEach>
                        </b:accordion>    
                    </b:panel>
                </c:forEach>
                <!--</b:accordion>-->
            </ui:define>
        </ui:composition>
    </h:body>
</html>

